[gd_scene load_steps=25 format=3 uid="uid://bgl7s4p3tfiyp"]

[ext_resource type="Script" uid="uid://b3yayh5lglaef" path="res://Escenas/nivel_test_cosas.gd" id="1_f2d03"]
[ext_resource type="PackedScene" uid="uid://dv53lkd0nlsqn" path="res://Escenas/player.tscn" id="1_masba"]
[ext_resource type="PackedScene" uid="uid://c1maqyy1m4dy2" path="res://Escenas/hud.tscn" id="2_v8hp2"]
[ext_resource type="PackedScene" uid="uid://cypdw7mmux5m0" path="res://Escenas/caja_prueba.tscn" id="3_vsyqw"]
[ext_resource type="Shader" uid="uid://bbewmj24r4xsl" path="res://Visuals/CRTShader.gdshader" id="4_fc6a6"]
[ext_resource type="PackedScene" uid="uid://b206o12bd4jn4" path="res://assets/modelos3d/sofa/gray_couch.glb" id="5_yan54"]
[ext_resource type="PackedScene" uid="uid://dxab6opwqet34" path="res://Escenas/televisor.tscn" id="6_d6gjg"]
[ext_resource type="PackedScene" uid="uid://c6wtom0bgmj1v" path="res://assets/modelos3d/psx_wooden_table.glb" id="7_g62ul"]
[ext_resource type="PackedScene" uid="uid://ceow2xxsswr2s" path="res://Escenas/vhs.tscn" id="8_0wfyr"]
[ext_resource type="PackedScene" uid="uid://bnhqs702rlgt8" path="res://assets/modelos3d/vhs/vhs_tape.glb" id="10_mnpw2"]
[ext_resource type="PackedScene" uid="uid://drfq4vnofcw5h" path="res://Escenas/camera_transition.tscn" id="11_0efjf"]
[ext_resource type="PackedScene" uid="uid://fpxo4816bbbx" path="res://Escenas/enemigo_1.tscn" id="12_wsh5n"]

[sub_resource type="NavigationMesh" id="NavigationMesh_0efjf"]
vertices = PackedVector3Array(-15.753969, 0.7460327, -15.753969, -15.753969, 0.7460327, -1.7539692, -15.003969, 0.7460327, -1.5039692, 15.746031, 0.7460327, -15.753969, -15.003969, 0.7460327, 14.246031, 15.746031, 0.7460327, 14.246031)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(4, 2, 5), PackedInt32Array(5, 2, 3)]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_g4vds"]
albedo_color = Color(0.4636051, 0.24076608, 0.014501506, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_masba"]
material = SubResource("StandardMaterial3D_g4vds")
size = Vector2(32, 32)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_g4vds"]
points = PackedVector3Array(16.25397, 0.25396827, 16.25397, -16.25397, -0.25396827, -16.25397, -16.25397, 0.25396827, -16.25397, 16.25397, -0.25396827, -16.25397, -16.25397, -0.25396827, 16.25397, -16.25397, 0.25396827, 16.25397, 16.25397, 0.25396827, -16.25397, 16.25397, -0.25396827, 16.25397)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_fc6a6"]
shader = ExtResource("4_fc6a6")
shader_parameter/overlay = false
shader_parameter/scanlines_opacity = 0.006000000285
shader_parameter/scanlines_width = 0.1870000088825
shader_parameter/grille_opacity = 0.2000000095
shader_parameter/resolution = Vector2(640, 480)
shader_parameter/pixelate = true
shader_parameter/roll = true
shader_parameter/roll_speed = 8.0
shader_parameter/roll_size = 15.0
shader_parameter/roll_variation = 1.8
shader_parameter/distort_intensity = 0.05
shader_parameter/noise_opacity = 0.4
shader_parameter/noise_speed = 5.0
shader_parameter/static_noise_intensity = 0.06
shader_parameter/aberration = 0.03
shader_parameter/brightness = 1.4
shader_parameter/discolor = true
shader_parameter/warp_amount = 0.0
shader_parameter/clip_warp = false
shader_parameter/vignette_intensity = 0.4
shader_parameter/vignette_opacity = 0.5

[sub_resource type="Environment" id="Environment_v8hp2"]
background_mode = 1
background_color = Color(0.6553156, 0.9197493, 0.8733052, 1)

[sub_resource type="QuadMesh" id="QuadMesh_yan54"]
flip_faces = true
size = Vector2(2, 2)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_d6gjg"]
shader = ExtResource("4_fc6a6")
shader_parameter/overlay = false
shader_parameter/scanlines_opacity = 0.4
shader_parameter/scanlines_width = 0.25
shader_parameter/grille_opacity = 0.3
shader_parameter/resolution = Vector2(640, 480)
shader_parameter/pixelate = true
shader_parameter/roll = true
shader_parameter/roll_speed = 8.0
shader_parameter/roll_size = 15.0
shader_parameter/roll_variation = 1.8
shader_parameter/distort_intensity = 0.05
shader_parameter/noise_opacity = 0.4
shader_parameter/noise_speed = 5.0
shader_parameter/static_noise_intensity = 0.06
shader_parameter/aberration = 0.03
shader_parameter/brightness = 1.4
shader_parameter/discolor = true
shader_parameter/warp_amount = 1.0
shader_parameter/clip_warp = false
shader_parameter/vignette_intensity = 0.4
shader_parameter/vignette_opacity = 0.5

[sub_resource type="BoxShape3D" id="BoxShape3D_yan54"]
size = Vector3(2.0439453, 1, 5.020355)

[sub_resource type="BoxShape3D" id="BoxShape3D_0wfyr"]
size = Vector3(2.508545, 1.1459961, 1)

[sub_resource type="Animation" id="Animation_0wfyr"]
resource_name = "poner_vhs"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("VHS_Visual:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.00999999, 0.17666666, 0.6433333, 0.8433333, 1.01),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0.38391376, 0.42682183, 10.146286), Vector3(0.38391376, 0.31490052, 10.236165), Vector3(0.38391376, 0.26718846, 10.860988), Vector3(0.38391376, 0.27383524, 10.900475), Vector3(0.38391376, 0.31490052, 11.158305)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("VHS_Visual:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("VHS_Visual:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.04, 0.96666664, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [false, true, true, false]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_mnpw2"]
_data = {
&"poner_vhs": SubResource("Animation_0wfyr")
}

[node name="NivelTestCosas" type="Node3D"]
script = ExtResource("1_f2d03")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_0efjf")

[node name="Piso" type="StaticBody3D" parent="NavigationRegion3D"]

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/Piso"]
mesh = SubResource("PlaneMesh_masba")
skeleton = NodePath("../../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/Piso"]
shape = SubResource("ConvexPolygonShape3D_g4vds")

[node name="Piso2" type="StaticBody3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, -5.9604645e-08, 0.99999994, 0, -0.99999994, -5.9604645e-08, 0, 0, 15)

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/Piso2"]
mesh = SubResource("PlaneMesh_masba")
skeleton = NodePath("../../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/Piso2"]
shape = SubResource("ConvexPolygonShape3D_g4vds")

[node name="Piso3" type="StaticBody3D" parent="NavigationRegion3D"]
transform = Transform3D(-4.371139e-08, 0.99999994, 5.9604645e-08, 0, -5.960464e-08, 0.9999999, 0.99999994, 4.371138e-08, 2.6054016e-15, -16, 0, 15)

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/Piso3"]
mesh = SubResource("PlaneMesh_masba")
skeleton = NodePath("../../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/Piso3"]
shape = SubResource("ConvexPolygonShape3D_g4vds")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_fc6a6")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Piso4" type="StaticBody3D" parent="."]
transform = Transform3D(1.3113414e-07, -0.9999999, -5.9604627e-08, -1.5529405e-22, -5.9604638e-08, 0.9999999, -0.9999999, -1.3113414e-07, -7.816204e-15, 16, 0, 15)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Piso4"]
mesh = SubResource("PlaneMesh_masba")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Piso4"]
shape = SubResource("ConvexPolygonShape3D_g4vds")

[node name="Player" parent="." node_paths=PackedStringArray("HUD") instance=ExtResource("1_masba")]
velocidad_corriendo = 8.4
velocidad_caminando = 5.5
velocidad_agachado = 3.3
JUMP_VELOCITY = 5.8
HUD = NodePath("../HUD")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_v8hp2")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -0.5, 0.8660253, 0, -0.8660253, -0.5, 0, 8, -12)

[node name="HUD" parent="." instance=ExtResource("2_v8hp2")]

[node name="CajaPrueba" parent="." instance=ExtResource("3_vsyqw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, -8)

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.7739296, -0.84031105)
extra_cull_margin = 16384.0
mesh = SubResource("QuadMesh_yan54")
skeleton = NodePath("../../..")
surface_material_override/0 = SubResource("ShaderMaterial_d6gjg")

[node name="Sofa" type="StaticBody3D" parent="."]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 0, 1, 6)

[node name="Sketchfab_Scene" parent="Sofa" instance=ExtResource("5_yan54")]
transform = Transform3D(5, 0, 0, 0, 5, 0, 0, 0, 5, 0, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Sofa"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0063476563, 0, 0.020767212)
shape = SubResource("BoxShape3D_yan54")

[node name="Televisor" parent="." instance=ExtResource("6_d6gjg")]
transform = Transform3D(-1, 0, 8.742278e-08, 0, 1, 0, -8.742278e-08, 0, -1, 0, 1.2839208, 11.890358)

[node name="Mesa" type="StaticBody3D" parent="."]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 10, 0, 10)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Mesa"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.048950195, 0.62700194, 0)
shape = SubResource("BoxShape3D_0wfyr")

[node name="Sketchfab_Scene" parent="Mesa" instance=ExtResource("7_g62ul")]
transform = Transform3D(1.2, 0, 0, 0, 1.2, 0, 0, 0, 1.2, 0, 0, 0)

[node name="VHS" parent="." instance=ExtResource("8_0wfyr")]
transform = Transform3D(0.9094685, 0, -0.4157729, 0, 1, 0, 0.4157729, 0, 0.9094685, 10.043176, 1.4730037, 10.390315)

[node name="AnimationTele" type="AnimationPlayer" parent="."]
unique_name_in_owner = true
libraries = {
&"": SubResource("AnimationLibrary_mnpw2")
}

[node name="VHS_Visual" parent="." instance=ExtResource("10_mnpw2")]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 0.38391376, 0.42682183, 10.146286)
visible = false

[node name="CameraTele" type="Camera3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(-1, 0, 8.742278e-08, 0, 1, 0, -8.742278e-08, 0, -1, 0.037580967, 1.3486788, 9.4058485)
far = 200.0

[node name="CameraTransition" parent="." instance=ExtResource("11_0efjf")]
unique_name_in_owner = true

[node name="Enemigo1" parent="." instance=ExtResource("12_wsh5n")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.0413694, 0, -12.037239)

[node name="MarkerEnemigo1" type="Marker3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 1, -13)

[node name="MarkerEnemigo2" type="Marker3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11, 1, -1)

[node name="MarkerEnemigo3" type="Marker3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 13, 1, -12)
